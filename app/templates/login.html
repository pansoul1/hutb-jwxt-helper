<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¹–å—å·¥å•†å¤§å­¦æ•™åŠ¡ç³»ç»Ÿ - ç™»å½•</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}" />
</head>
<body>
    <div class="login-container">
        <!-- å·¦ä¾§å“ç‰Œå±•ç¤ºåŒº -->
        <div class="brand-section">
            <div class="brand-content">
                <!-- è£…é¥°å›¾æ ‡ -->
                <div class="brand-icons">
                    <div class="icon-item">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                            <path d="M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div class="icon-item">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14,2 14,8 20,8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10,9 9,9 8,9"/>
                        </svg>
                    </div>
                    <div class="icon-item">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6"/>
                            <path d="M21 12h-6m-6 0H3"/>
                        </svg>
                    </div>
                </div>
                
                <h1>å¿«é€Ÿã€é«˜æ•ˆã€ä¾¿æ·</h1>
                <p>æ‚¨çš„æ•™åŠ¡åŠ©æ‰‹ï¼Œè½»æ¾æŒæ§å­¦ä¹ ç”Ÿæ´»</p>
                
                <!-- ç‰¹è‰²åŠŸèƒ½å±•ç¤º -->
                <div class="feature-highlights">
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ“Š</span>
                        <span>æˆç»©æŸ¥è¯¢</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ“…</span>
                        <span>è¯¾ç¨‹è¡¨</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§ç™»å½•è¡¨å• -->
        <div class="form-section">
            <div class="login-card">
                <div class="card-header">
                    <h2>ç™»å½•</h2>
                    <p>æ¬¢è¿ä½¿ç”¨æ•™åŠ¡ç³»ç»ŸåŠ©æ‰‹</p>
                </div>

                {% if get_flashed_messages() %}
                <div class="flash-message">
                    {{ get_flashed_messages()[0] }}
                </div>
                {% endif %}

                <form id="loginForm" action="/process_login" method="post">
                    <div class="form-group">
                        <label for="username">å­¦å·</label>
                        <input type="text" id="username" name="username" required placeholder="è¯·è¾“å…¥å­¦å·" autocomplete="off">
                    </div>
                    
                    <div class="form-group">
                        <label for="password">å¯†ç </label>
                        <div class="password-input">
                            <input type="password" id="password" name="password" required placeholder="è¯·è¾“å…¥å¯†ç ">
                            <button type="button" class="password-toggle" id="passwordToggle">
                                <svg class="eye-icon" viewBox="0 0 24 24" fill="none">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2"/>
                                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="form-group remember-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="rememberMe" name="remember">
                            <span class="checkmark"></span>
                            è®°ä½è´¦å·å’Œå¯†ç 
                        </label>
                    </div>
                    
                    <button type="submit" class="login-btn" id="loginBtn">
                        <span class="btn-text">ç™»å½•</span>
                        <div class="btn-loader" style="display: none;">
                            <div class="spinner"></div>
                        </div>
                    </button>
                    
                    <div class="forgot-password-link">
                        <a href="{{ url_for('password_reset.forgot_password_page') }}" class="forgot-link">å¿˜è®°å¯†ç ï¼Ÿ</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const rememberCheckbox = document.getElementById('rememberMe');
        const loginForm = document.getElementById('loginForm');
        const loginBtn = document.getElementById('loginBtn');
        const btnText = document.querySelector('.btn-text');
        const btnLoader = document.querySelector('.btn-loader');
        const passwordToggle = document.getElementById('passwordToggle');

        // å¯†ç æ˜¾ç¤º/éšè—åˆ‡æ¢
        passwordToggle.addEventListener('click', () => {
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;
            passwordToggle.classList.toggle('active');
        });

        // å°è¯•è¯»å–æœ¬åœ°å­˜å‚¨ä¸­çš„è´¦å·å¯†ç 
        const storedUser = localStorage.getItem('hutb_username');
        const storedPass = localStorage.getItem('hutb_password');
        if (storedUser && storedPass) {
            usernameInput.value = storedUser;
            passwordInput.value = storedPass;
            rememberCheckbox.checked = true;
        }

        // è¡¨å•æäº¤å¤„ç†
        loginForm.addEventListener('submit', (e) => {
            // ä¿å­˜å¯†ç é€»è¾‘
            if (rememberCheckbox.checked) {
                localStorage.setItem('hutb_username', usernameInput.value);
                localStorage.setItem('hutb_password', passwordInput.value);
            } else {
                localStorage.removeItem('hutb_username');
                localStorage.removeItem('hutb_password');
            }
            
            // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
            btnText.style.display = 'none';
            btnLoader.style.display = 'block';
            loginBtn.disabled = true;
        });

        // è¾“å…¥æ¡†ç„¦ç‚¹æ•ˆæœ
        document.querySelectorAll('input[type="text"], input[type="password"]').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentNode.classList.add('focused');
            });
            
            input.addEventListener('blur', function() {
                if (!this.value) {
                    this.parentNode.classList.remove('focused');
                }
            });
            
            // å¦‚æœæœ‰å€¼ï¼Œä¿æŒç„¦ç‚¹çŠ¶æ€
            if (input.value) {
                input.parentNode.classList.add('focused');
            }
        });
    });
    </script>
</body>
</html>